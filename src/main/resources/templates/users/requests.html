<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head lang="en">
    <meta charset="UTF-8"/>
    <title>Acebook - Friend Requests</title>
    <link rel="stylesheet" href="/main.css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.10.2/dist/full.min.css" rel="stylesheet" type="text/css" />
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="bg-gray-100" data-theme="light">

<div sec:authorize="isAuthenticated()" class="navbar-sticky bg-white shadow-lg border-b border-gray-200 z-50 relative">
    <div class="navbar w-full max-w-7xl mx-auto px-4">
        <div class="navbar-start">
            <a href="/posts" class="btn btn-ghost text-2xl font-extrabold text-blue-600 mr-4">AceBook</a>
            <div class="hidden lg:flex">
                <label class="input input-sm input-bordered flex items-center gap-2 rounded-full navbar-search-input">
                    <i data-lucide="search" class="w-4 h-4 text-gray-500"></i>
                    <input type="text" class="grow placeholder-gray-500 bg-transparent" placeholder="Search AceBook" />
                </label>
            </div>
        </div>

        <div class="navbar-center flex flex-grow justify-center lg:flex-none"></div>

        <div class="navbar-end space-x-2">
            <button class="btn btn-ghost btn-circle lg:hidden">
                <i data-lucide="search" class="w-5 h-5"></i>
            </button>

            <span class="hidden md:inline-block text-sm text-gray-500 mr-2">
                Hi, <span sec:authentication="principal.attributes['email']">User</span>
            </span>

            <div class="dropdown dropdown-end">
                <div tabindex="0" role="button" class="btn btn-ghost btn-circle avatar">
                    <div class="w-10 rounded-full ring ring-gray-300">
                        <img src="https://placehold.co/40x40/374151/ffffff?text=Me" alt="User Avatar" />
                    </div>
                </div>
                <ul tabindex="0" class="menu menu-sm dropdown-content mt-3 z-[1] p-2 shadow bg-base-100 rounded-box w-52">
                    <li><a th:href="@{/users/profile}">Profile</a></li>
                    <li><a href="/logout">Logout</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>

<div sec:authorize="isAnonymous()" class="bg-white shadow-lg border-b border-gray-200">
    <div class="navbar w-full max-w-7xl mx-auto px-4">
        <div class="navbar-start">
            <a href="/posts" class="btn btn-ghost text-2xl font-extrabold text-blue-600 mr-4">AceBook</a>
        </div>
        <div class="navbar-end space-x-2">
            <a href="/login" class="btn btn-sm btn-primary rounded-full hover:bg-blue-700">Sign In</a>
        </div>
    </div>
</div>

<main class="bg-gray-100 flex justify-center items-start pt-8 pb-8 min-h-screen">
    <div class="w-full max-w-xl space-y-4">

        <h1 class="text-2xl font-bold text-gray-800 mb-4 text-center">Pending Friend Requests</h1>

        <div th:each="requester : ${requesters}"
             class="card w-full bg-white border border-gray-200 rounded-lg shadow-md p-4 flex flex-row items-center justify-between">

            <div class="flex items-center space-x-3">
                <div class="w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold text-sm">OL</div>
                <p th:text="${requester.username}" class="font-semibold text-gray-900"></p>
            </div>

            <div class="flex space-x-2">
                <form th:action="@{'/users/' + ${requester.id} + '/requests/accept'}"
                      method="post"
                      class="inline">
                    <button type="submit" class="btn btn-sm btn-success rounded-full">Accept</button>
                </form>

                <form th:action="@{'/users/' + ${requester.id} + '/requests/reject'}"
                      method="post"
                      class="inline">
                    <button type="submit" class="btn btn-sm btn-error rounded-full">Reject</button>
                </form>
            </div>
        </div>
    </div>
</main>
<script>
    lucide.createIcons();
</script>
</body>
</html>